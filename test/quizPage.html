<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>퀴즈 도전</title>
  <script>
    let attempts = 2;

    function loadQuiz() {
      const index = localStorage.getItem('selectedQuizIndex');
      const quizzes = JSON.parse(localStorage.getItem('quizzes')) || [];
      const quiz = quizzes[index];

      document.getElementById('question').textContent = quiz.question;
      const optionsContainer = document.getElementById('options');
      optionsContainer.innerHTML = '';

      quiz.answers.forEach((answer, i) => {
        const option = document.createElement('label');
        option.innerHTML = `<input type="radio" name="answer" value="${i + 1}"> ${answer}`;
        optionsContainer.appendChild(option);
        optionsContainer.appendChild(document.createElement('br'));
      });
    }

    function submitAnswer() {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) {
        alert('정답을 선택하세요!');
        return;
      }

      const index = localStorage.getItem('selectedQuizIndex');
      const quizzes = JSON.parse(localStorage.getItem('quizzes'));
      const correctAnswer = quizzes[index].correctAnswer;

      if (parseInt(selected.value) === correctAnswer) {
        alert('정답입니다!');
        window.location.href = 'quizListPage.html';
      } else {
        attempts--;
        if (attempts > 0) {
          alert(`틀렸습니다! 남은 기회: ${attempts}`);
        } else {
          alert('모든 기회를 소진했습니다!');
          window.location.href = 'retryPage.html';
        }
      }
    }
  </script>
</head>
<body onload="loadQuiz()">
  <h1>퀴즈 도전</h1>
  <p id="question"></p>
  <form id="quizForm">
    <div id="options"></div>
    <button type="button" onclick="submitAnswer()">제출</button>
  </form>
</body>
</html>
